<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.25.6/d3-legend.min.js"></script>
    <script src="https://unpkg.com/@popperjs/core@2"></script>

    <script src="components/dialog.js"></script>

    <title>RECCON plotting test</title>
    <style>
        body {
            background: #eee;
            overflow-y: scroll;
        }

        .container {
            width: 800px;
            background: white;
        }

        .brushed {
            stroke-width: 1;
            stroke: gray;
            r: 5;
        }
    </style>
<body>
    <header>
        <nav class="container navbar navbar-light bg-light">
            <div class="container-fluid">
                <span class="navbar-brand mb-0 h1">Dialog plot</span>
            </div>
        </nav>

    </header>
    <main class="container pb-3">

    </main>
    <script>
        let data, dialog;
        let filepath = "http://localhost:8000/dailydialog_table_all.csv";

        function updateDialog() {
            
        }

        // CSV 파일 경로
        const csvFilePath = filepath;

        d3.csv(filepath)
            .then(csvData => {
                csvData.forEach(d => {
                    console.log(d)
                })
            })
        

        // FileReader를 사용하여 CSV 파일 읽기
        const fileReader = new FileReader();

        fileReader.onload = function(e) {
        const csvContents = e.target.result;
        const lines = csvContents.split('\n');
        
        lines.forEach(function(line) {
            console.log(line);
        });
        };

        fileReader.onerror = function(e) {
        console.error('파일을 읽는 도중 오류가 발생했습니다:', e.target.error);
        };

        // CSV 파일 읽기
        fetch(csvFilePath, {
            method: 'GET',
            mode: 'cors',
        })
        .then(response => response.text())
        .then(csvContents => {
          const lines = csvContents.split('\n');
          lines.forEach(line => {
            console.log(line);
          });
        })
        .catch(error => {
          console.error('파일을 불러오는 도중 오류가 발생했습니다:', error);
        });
        


    </script>
</body>